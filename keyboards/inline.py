from aiogram.filters.callback_data import CallbackData
from aiogram.utils.keyboard import InlineKeyboardBuilder
from data.database import DataBase

db = DataBase('mainbase.db')


class MyCallBack(CallbackData, prefix='my_callback'):
    zap: str


class MyLocation(CallbackData, prefix='my_location'):
    loc: str


class ToBuy(CallbackData, prefix='to_buy'):
    buy: str


class ToAdmin(CallbackData, prefix='to_adm'):
    adm: str


def menu_start():
    keyboard = InlineKeyboardBuilder()
    keyboard.button(text='üñ• –¢–≤–æ–π –ü—Ä–æ—Ñ–∏–ª—å', callback_data=MyCallBack(zap='profile'))
    keyboard.button(text='ü§ô–ö—É–ø–∏—Ç—å –∫—É—Ä–∏—Ç—åü§ô', callback_data=MyCallBack(zap='buy'))
    keyboard.button(text='‚ÄºÔ∏è–ê–∫—Ü–∏—è "–ü—Ä–∏–≤–µ–¥–∏ –¥—Ä—É–≥–∞"‚ÄºÔ∏è', callback_data=MyCallBack(zap='refs'))
    keyboard.button(text='–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è üìå', callback_data=MyCallBack(zap='inform'))
    keyboard.button(text='–°–≤—è–∑—å üì≤', callback_data=MyCallBack(zap='call_back'))
    keyboard.adjust(2, 1, 2)
    return keyboard.as_markup()


def sale_menu():
    gr = db.count_products('–ì—Ä–∞–º–º')
    pgr = db.count_products('–ü–æ–ª–∫–∞ (0,5 –≥—Ä–∞–º–º–∞)')
    kr = db.count_products('–ö–æ—Ä–∞–±–ª—å')
    pkr = db.count_products('–ü–æ–ª–∫–∞ (0,5 –∫–æ—Ä–∞–±–ª—è)')
    decl = db.count_products('–ü—è—Ç–∫–∞')
    keyboard = InlineKeyboardBuilder()
    keyboard.button(text=f'ü•¥–ö—É–ø–∏—Ç—å –≥—Ä–∞–º–º *({gr}—à—Ç)*', callback_data=MyCallBack(zap='gramm'))
    keyboard.button(text=f'–ü–æ–ª–∫–∞(0.5–≥—Ä)  *({pgr}—à—Ç)*', callback_data=MyCallBack(zap='polka'))
    keyboard.button(text=f'üö¢–ö—É–ø–∏—Ç—å –∫–æ—Ä–∞–±–ª—å  *({kr}—à—Ç)*', callback_data=MyCallBack(zap='full'))
    keyboard.button(text=f'–ü–æ–ª–∫–∞(0.5–∫–æ—Ä–∞–±–ª—è)  *({pgr}—à—Ç)*', callback_data=MyCallBack(zap='path_full'))
    keyboard.button(text='ü§Ø–ö—É–ø–∏—Ç—å —Å—Ç–∞–∫–∞–Ω', callback_data=MyCallBack(zap='glass'))
    keyboard.button(text=f'ü§´–ü—è—Ç–∫–∞  *({decl}—à—Ç)*', callback_data=MyCallBack(zap='decl'))
    keyboard.adjust(2,2,2)
    return keyboard.as_markup()


def location():
    keyboard = InlineKeyboardBuilder()
    keyboard.button(text='–¶–µ–Ω—Ç—Ä', callback_data=MyLocation(loc='city'))
    keyboard.button(text='–ë–ª–æ—á–æ–∫', callback_data=MyLocation(loc='block'))
    keyboard.button(text='–§–∏–ª—å—Ç—Ä—ã', callback_data=MyLocation(loc='filtry'))
    keyboard.button(text='–í–∞—Ç—É—Ç–∏–Ω–æ', callback_data=MyLocation(loc='vatut'))
    keyboard.button(text='–ö—Ä–∞—Å–Ω—ã–π', callback_data=MyLocation(loc='red'))
    keyboard.button(text='–ó—É–µ–≤—Å–∫–∏–π', callback_data=MyLocation(loc='zuev'))
    keyboard.adjust(2,2,2)
    return keyboard.as_markup()


def list_pay():
    keyboard = InlineKeyboardBuilder()
    keyboard.button(text='–ö—É–ø–∏—Ç—å', callback_data=ToBuy(buy='ok_pay'))
    keyboard.button(text='–û—Ç–º–µ–Ω–∏—Ç—å', callback_data=ToBuy(buy='cancel'))
    keyboard.adjust(2,2,2)
    return keyboard.as_markup()


def admin_start():
    keyboard = InlineKeyboardBuilder()
    keyboard.button(text='–î–æ–±–∞–≤–∏—Ç—å –ª–æ–∫–∞—Ü–∏—é', callback_data=ToAdmin(adm='add_loc'))
    keyboard.button(text='–ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–æ id', callback_data=ToAdmin(adm='look_id'))
    keyboard.button(text='–í—ã–¥–∞—Ç—å –±–æ–Ω—É—Å –ø–æ id', callback_data=ToAdmin(adm='get_bonus'))
    keyboard.button(text='–í—Å–µ —É—á–∞—Å—Ç–Ω–∏–∫–∏', callback_data=ToAdmin(adm='all_users'))
    keyboard.button(text='–ü—Ä–æ–¥–∞–∂–∏', callback_data=ToAdmin(adm='stat_sales'))
    keyboard.adjust(2, 2, 2)
    return keyboard.as_markup()


def menu_profile():
    keyboard = InlineKeyboardBuilder()
    keyboard.button(text='–ó–∞–±—Ä–∞—Ç—å –±–æ–Ω—É—Å', callback_data='ghr')
    keyboard.button(text='–ù–∞–∑–∞–¥', callback_data='bdf')
    keyboard.adjust(2, 2, 2)
    return keyboard.as_markup()